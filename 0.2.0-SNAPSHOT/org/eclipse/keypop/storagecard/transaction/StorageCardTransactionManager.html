<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>StorageCardTransactionManager (Keypop Storage Card Java API - 0.2.0-SNAPSHOT)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.eclipse.keypop.storagecard.transaction, interface: StorageCardTransactionManager">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<div class="about-language"><div style="margin-top: 7px"><a target="_parent" href="https://keypop.org/"><img src="https://keypop.org/media/logo-bg-white.svg" height="20px" style="background-color: white; padding: 3px; margin: 0 10px -7px 3px;"/></a> Keypop Storage Card Java API - 0.2.0-SNAPSHOT</div></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/StorageCardTransactionManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.eclipse.keypop.storagecard.transaction</a></div>
<h1 title="Interface StorageCardTransactionManager" class="title">Interface StorageCardTransactionManager</h1>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="modifiers">public interface </span><span class="element-name type-name-label">StorageCardTransactionManager</span></div>
<div class="block">Provides methods to manage APDU exchanges with a storage card.

 <p>This interface allows to:

 <ul>
   <li>Prepare read and write operations to the card
   <li>Process prepared commands in a single transaction
   <li>Manage the communication channel with the card
 </ul></div>
<dl class="notes">
<dt>Since:</dt>
<dd>1.0.0</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="StorageCardTransactionManager.html" title="interface in org.eclipse.keypop.storagecard.transaction">StorageCardTransactionManager</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#prepareReadBlock(int)" class="member-name-link">prepareReadBlock</a><wbr>(int&nbsp;blockNumber)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Prepares the reading of a specific block from the storage card.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="StorageCardTransactionManager.html" title="interface in org.eclipse.keypop.storagecard.transaction">StorageCardTransactionManager</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#prepareReadBlocks(int,int)" class="member-name-link">prepareReadBlocks</a><wbr>(int&nbsp;fromBlockNumber,
 int&nbsp;toBlockNumber)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Prepares the reading of a range of blocks from the storage card.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="StorageCardTransactionManager.html" title="interface in org.eclipse.keypop.storagecard.transaction">StorageCardTransactionManager</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#prepareWriteBlocks(int,byte%5B%5D)" class="member-name-link">prepareWriteBlocks</a><wbr>(int&nbsp;fromBlockNumber,
 byte[]&nbsp;data)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Prepares the writing of blocks of data to the storage card starting from a specific block
 number offset.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="StorageCardTransactionManager.html" title="interface in org.eclipse.keypop.storagecard.transaction">StorageCardTransactionManager</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#processCommands(org.eclipse.keypop.storagecard.transaction.ChannelControl)" class="member-name-link">processCommands</a><wbr>(<a href="ChannelControl.html" title="enum class in org.eclipse.keypop.storagecard.transaction">ChannelControl</a>&nbsp;channelControl)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Processes all previously prepared commands and closes the physical channel if requested.</div>
</div>
</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="prepareReadBlock(int)">
<h3>prepareReadBlock</h3>
<div class="member-signature"><span class="return-type"><a href="StorageCardTransactionManager.html" title="interface in org.eclipse.keypop.storagecard.transaction">StorageCardTransactionManager</a></span>&nbsp;<span class="element-name">prepareReadBlock</span><wbr><span class="parameters">(int&nbsp;blockNumber)</span></div>
<div class="block">Prepares the reading of a specific block from the storage card.

 <p>Block numbers start at 1 and the maximum value is provided by <a href="../card/ProductType.html#getBlockCount()"><code>ProductType.getBlockCount()</code></a>.

 <p>Once this command is processed, the result is available in <a href="../card/StorageCard.html" title="interface in org.eclipse.keypop.storagecard.card"><code>StorageCard</code></a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>blockNumber</code> - The number of the block to be read.</dd>
<dt>Returns:</dt>
<dd>The current instance.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - If the block number is out of range.</dd>
<dt>Since:</dt>
<dd>1.0.0</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../card/ProductType.html#getBlockCount()"><code>ProductType.getBlockCount()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="prepareReadBlocks(int,int)">
<h3>prepareReadBlocks</h3>
<div class="member-signature"><span class="return-type"><a href="StorageCardTransactionManager.html" title="interface in org.eclipse.keypop.storagecard.transaction">StorageCardTransactionManager</a></span>&nbsp;<span class="element-name">prepareReadBlocks</span><wbr><span class="parameters">(int&nbsp;fromBlockNumber,
 int&nbsp;toBlockNumber)</span></div>
<div class="block">Prepares the reading of a range of blocks from the storage card.

 <p>Block numbers start at 1 and the maximum value is provided by <a href="../card/ProductType.html#getBlockCount()"><code>ProductType.getBlockCount()</code></a>.

 <p>Once this command is processed, the result is available in <a href="../card/StorageCard.html" title="interface in org.eclipse.keypop.storagecard.card"><code>StorageCard</code></a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>fromBlockNumber</code> - The starting block number (inclusive).</dd>
<dd><code>toBlockNumber</code> - The ending block number (inclusive).</dd>
<dt>Returns:</dt>
<dd>The current instance.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - If fromBlockNumber or toBlockNumber are not in the valid range
     or if fromBlockNumber > toBlockNumber.</dd>
<dt>Since:</dt>
<dd>1.0.0</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../card/ProductType.html#getBlockCount()"><code>ProductType.getBlockCount()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="prepareWriteBlocks(int,byte[])">
<h3>prepareWriteBlocks</h3>
<div class="member-signature"><span class="return-type"><a href="StorageCardTransactionManager.html" title="interface in org.eclipse.keypop.storagecard.transaction">StorageCardTransactionManager</a></span>&nbsp;<span class="element-name">prepareWriteBlocks</span><wbr><span class="parameters">(int&nbsp;fromBlockNumber,
 byte[]&nbsp;data)</span></div>
<div class="block">Prepares the writing of blocks of data to the storage card starting from a specific block
 number offset.

 <p>The provided data should be a byte array representing the content of the blocks to be
 written. The number of blocks that will be written is determined by the length of the data
 array divided by the block size of the storage card. The block size is provided by <a href="../card/ProductType.html#getBlockCount()"><code>ProductType.getBlockCount()</code></a>.

 <p>Once this command is processed, the data will be available in <a href="../card/StorageCard.html" title="interface in org.eclipse.keypop.storagecard.card"><code>StorageCard</code></a> using the
 dedicated block management methods.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>fromBlockNumber</code> - The offset from which the blocks will be written.</dd>
<dd><code>data</code> - The data to be written to the storage card.</dd>
<dt>Returns:</dt>
<dd>The current instance of the <a href="StorageCardTransactionManager.html" title="interface in org.eclipse.keypop.storagecard.transaction"><code>StorageCardTransactionManager</code></a>.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - If the block number is out of range, or data is null, or its
     length is not a multiple of the block size.</dd>
<dt>Since:</dt>
<dd>1.0.0</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../card/ProductType.html#getBlockCount()"><code>ProductType.getBlockCount()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="processCommands(org.eclipse.keypop.storagecard.transaction.ChannelControl)">
<h3>processCommands</h3>
<div class="member-signature"><span class="return-type"><a href="StorageCardTransactionManager.html" title="interface in org.eclipse.keypop.storagecard.transaction">StorageCardTransactionManager</a></span>&nbsp;<span class="element-name">processCommands</span><wbr><span class="parameters">(<a href="ChannelControl.html" title="enum class in org.eclipse.keypop.storagecard.transaction">ChannelControl</a>&nbsp;channelControl)</span>
                                       throws <span class="exceptions"><a href="../ReaderIOException.html" title="class in org.eclipse.keypop.storagecard">ReaderIOException</a>,
<a href="../CardIOException.html" title="class in org.eclipse.keypop.storagecard">CardIOException</a>,
<a href="../UnexpectedCommandStatusException.html" title="class in org.eclipse.keypop.storagecard">UnexpectedCommandStatusException</a></span></div>
<div class="block">Processes all previously prepared commands and closes the physical channel if requested.

 <p>All APDUs corresponding to the prepared commands are sent to the card, their responses are
 retrieved and used to update the <a href="../card/StorageCard.html" title="interface in org.eclipse.keypop.storagecard.card"><code>StorageCard</code></a> associated with the transaction.

 <p>For write commands, the <a href="../card/StorageCard.html" title="interface in org.eclipse.keypop.storagecard.card"><code>StorageCard</code></a> is updated only when the command is successful.

 <p>The process is interrupted at the first failed command.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>channelControl</code> - Policy for managing the physical channel after executing commands to the
     card.</dd>
<dt>Returns:</dt>
<dd>The current instance.</dd>
<dt>Throws:</dt>
<dd><code><a href="../ReaderIOException.html" title="class in org.eclipse.keypop.storagecard">ReaderIOException</a></code> - If a communication error with the card reader or the cryptographic
     module reader occurs.</dd>
<dd><code><a href="../CardIOException.html" title="class in org.eclipse.keypop.storagecard">CardIOException</a></code> - If a communication error with the card occurs.</dd>
<dd><code><a href="../UnexpectedCommandStatusException.html" title="class in org.eclipse.keypop.storagecard">UnexpectedCommandStatusException</a></code> - If one of the prepared command failed.</dd>
<dt>Since:</dt>
<dd>1.0.0</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &copy; Eclipse Foundation, Inc. All Rights Reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
